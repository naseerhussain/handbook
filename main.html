<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

	<link href="css/bootstrap.min.css" rel="stylesheet">


        <script type="text/javascript" charset="utf-8" src="lib/jquery.min.js"></script>

	<script type="text/javascript" src="lib/bootstrap.min.js"></script>

	<script type="text/javascript" src="lib/masonry.pkgd.min.js"></script>

<title>New App</title>

<style>
.thumbnails{
	float:left;
}
	
.thumbnail{
	width:30%;
	height:35%;
	margin-top:3%;
	margin-left:2%;
	float:left;
	
}

.well {
	width:100%;
	height:100%;
}
</style>

<script>
 $(document).ready(function(){
	var getTilesInfo = getInfo();
	var size = Object.key(getTilesInfo);

	for(var i=1;i<=size;i++){
		var div = '<div class="thumbnail"><legend>'+getTilesInfo[i].cName+'</legend><p>'+getTilesInfo[i].compDesc+'</p><p>'+getTilesInfo[i].compProduct+'</p><legend></legend><p>'+getTilesInfo[i].skills+'</p>';
		$("#thumbnails").append(div);	
	}
	
	$("#searchCompany").keyup(function(){
		clearContainer();
		var search = $("#searchCompany").val();
		filteredResults(getTilesInfo, search, "cName");
	});	
	
	$("#searchCategory").keyup(function(){
		clearContainer();
		var search = $("#searchCategory").val();
		filteredResults(getTilesInfo, search, "compProduct");
	});

	$("#searchTech").keyup(function(){
		clearContainer();
		var search = $("#searchTech").val();
		filteredResults(getTilesInfo, search, "skills");
	});
 });

function getInfo(){
	var jTable = localStorage.getItem("jobBase") || {};
	
	if(Object.size(jTable) > 0){
		jTable = JSON.parse(jTable);
	}
	return jTable;
}

function filteredResults(getTilesInfo,search, attribute){
	var size = Object.key(getTilesInfo);
	
	for(var i=1;i<=size;i++){
		var str =getTilesInfo[i];
		str = str[attribute];
		if(str.search(search) > -1){
			var div = '<div class="thumbnail"><legend>'+getTilesInfo[i].cName+'</legend><p>'+getTilesInfo[i].compDesc+'</p><p>'+getTilesInfo[i].compProduct+'</p><legend></legend><p>'+getTilesInfo[i].skills+'</p>';
	                $("#thumbnails").append(div);   

		}
	}
}

function clearContainer(){
	$("div .thumbnail").remove();
	var thumb = "<div class='thumbnail'><h3>Post Job</h3><p>Company Name</p><p>Company Description</p><p>Products</p><p>Required Skills</p></div>";
	$("#thumbnails").append(thumb);
}
	

Object.size = function(obj) {
    var size = 0, key;
    for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
    }
    return size;
};

Object.key = function(obj){
        var size = 0;

        for(key in obj){
                size= key;
        }
        return size;
}


</script>
</head>
<body>
	<div class="container">
		<br><br>
		<a href="index.html" class="btn btn-sm btn-danger pull-right">Log Out</a>
		<a href="createTile.html" class="btn btn-sm pull-right btn-primary" style="margin-right:2%;">Create</a>
		<div class="row" style="margin-top:5%">
			<div class="col">
				<table class="table table-condensed" style="text-align:center;">
    					<thead>
        					<tr>
            						<th style="text-align:center">Start Up</th>
            						<th style="text-align:center">Category</th>
            						<th style="text-align:center">Technology Used</th>
        					</tr>
    					</thead>
					<tbody>
						<tr>
							<td><input type="text" id="searchCompany"></td>
							<td><input type="text" id="searchCategory"></td>
							<td><input type="text" id="searchTech"></td> 
						</tr>
					<tbody>
				</table>
			</div>
		</div>
		<div class="row" style="margin-top:2%; background-color:#F0F0F0;margin-">
			<div class = "tiles">
				<!--<div class="tiles-li col-sm-6 col-md-4 col-lg-3"><div class="well">3<br>product</div></div>-->
				<div class="masonry-container" id="thumbnails">
  					<div class="thumbnail">
						<h3>Post Job</h3>
						<p>Company Name</p>
						<p>Company Description</p>
						<p>Products</p>
						<p>Required Skills</p>
  					</div>
				</div>  
			</div>
		</div>
			
	</div>
</body>
</html>
